# encryption - 암호화
![암호화](https://user-images.githubusercontent.com/24876345/142786548-350a25e9-6ce3-4280-b091-13c4ab2a2077.PNG)

## 양방향 알고리즘
  1. 대칭키(비공개키) 방식
      - 대표 : DES, AES
      - 특정 : 암복호화에 서로 동일한 키가 사용되는 암호화 방식. 
      - 장점 : 속도가 빠르다.
      - 단점 : 키 배송 위험성 존재하여 송신 측에서 수신측에 암호 키를 전달하는 과정에서 노출우려가 있다.

  2. 비대칭키(공개키) 방식
      - 대표 : RSA
      - 특징 : 암복호화에 서로 다른 키가 사용되는 암호화 방식. 하나의 키는 공개키로 사용.
      - 장점 : 키 배송의 문제를 근본적으로 차단하여 안전성이 높다.
      - 단점 : 대칭키(비공개키)방식에 비해서 느리다.

## 단방향 알고리즘 
- 대표적으로 MD5, SHA 알고리즘이 있고, 이를 해시(HASH) 라고 한다.
- MD5의 경우는 이미 충돌값이 발견되었기에 안전하지 않다고 판단
- **SHA-3 알고리즘은 JDK 9 이상을 사용해야 알고리즘을 사용할 수 있다.**

1. 해시(HASH)란?
    - **함수는 입력된 값이 같으면 언제나 같은 결과를 나타낸다.**
    - 임의의 길이의 데이터를 고정된 길이의 데이터로 반환 시켜주는 함수이다.
    - 입력값의 길이가 달라도 출력값은 언제나 고정된 길이로 반환한다.
    - 해시함수는 암호학적 해시 함수와 비암호학적 해시함수로 구분된다.

2. 특징
    - 눈사태 효과
      + 입력값의 아주 작은 변화로도 결과값이 전혀 다르게 도출되는 효과를 의미한다.

3. 해시(HASH) 단점
    - Rainbow table 공격
      + **함수는 입력된 값이 같으면 언제나 같은 결과를 나타낸다.** 라는 특징을 이용해 사용자의 암호유형을 정의한 Rainbow table을 만들어 하나씩 대입해 보면서 암호를 발견해 낼 수 있다.

4. 해시(HASH) 함수 단점의 보안법
    - Key Stretching(키 스트레칭)
      + 해시 암호화를 여러번 반복하여서 암호학적 문제가 발생하는 점을 줄일수있다.
    - 솔팅(Salting)
      + 실제 암호의 앞 혹은 뒤 혹은 앞뒤 어느곳에다가 솔트된 데이터와 원본 패스워드를 넣어 해시값을 만든다.

5. 해시(HASH) 사용
    - https://d2.naver.com/helloworld/318732 자세한 내용이 들어있다. 2013년도 글 
    - 개발자가 보완법 키 스트레칭 및 솔팅을 하여 SHA-256을 가지고 자신만의 암호화 시스템을 구축하여도 좋다.
    - 하지만 이미 많은 개발자 및 암호학자들이 만들어낸 강력한 라이브러리 들이 있어서 2가지를 알아보자.

6. 해시(HASH) 알고리즘을 이용한 라이브러리
    - **PBKDF2**
      + 솔트를 적용한후 키 스트레칭을 임의로 선택할수있는 function이다.
      + 아주 가볍고 구현하기 쉬운 장점이 있다.
      + 미국표준기술(NIST) 에서 승인된 알고리즘이고 미국 정부 시스템에서도 사용하는 알고리즘 이다.

    - **bcrypt**
      + 패스워드 저장을 목적으로 1999년에 발표된 메커니즘이다.
      + 아직까지도 가장 강력한 해시 메커니즘으로 알려져있다.
      + 많은 언어에서 지원이 가능하며 쉽게 접할수 있는 암호화 방식이다.
 
 ### SHA(단방향 알고리즘) 암호화란?
![SHA](https://user-images.githubusercontent.com/24876345/142789990-bdb42e5f-67e8-4971-844a-f0111af0b135.png)
  - Secure Hash Algorithm
  - MD5의 취약성을 개선 및 대처하기 위해 미국 국가안보국(NSA)이 1993년에 처음으로 설계했으며 미국 국가 표준으로 지정되었다.
  - 해시 값의 크기는 SHA 알고리즘에 따라오는 bit 수만큼 달라지게 된다. 
  - 해시 함수의 버전은 SHA 0 ~ SHA 3까지 있으며, 현재는 SHA2가 사용 가능하고, SHA3가 권장되고 있으며, SHA0과 1은 사용하지 않도록 하고 있다.
  - SHA0, SHA1은 충돌이 발견되었다. ex) 하나의 다이제스트에서 2개 이상의 hash값이 나옴
  - SHA-1은 SHA 함수들 중 가장 많이 쓰이며, TLS, SSL, PGP, SSH, IPSec 등 많은 보안 프로토콜과 프로그램에서 사용되고 있다.
  - SHA-224, SHA-256, SHA-384, SHA-512를 통칭해서 SHA-2라고 하기도 한다.
  - SHA-256은 가장 많은 분야에서 채택하여 사용되고 있는 암호 방식으로 출력 속도가 빠르기 때문에 인증서, 블록체인 등 많이 사용되고 있으며, SHA-2라고 하면 SHA-256이라고 말할 정도로 상용화가 잘 되어있다.

### bcrypt란? ###
  - 단방향 암호화를 위해 만들어진 해시 함수
  - sha256 같은 해시 함수들은 원래 암호화를 위해 설계된 것이 아니라 짧은 시간에 데이터를 검색하기 위한 자료구조로 설계가 되었다. 이 때문에 빠른 속도가 장점이지만 취약점의 원인이기도 하다. 그래서 bcrypt는 sha256의 단점을 보안하기 위해 만들어진 암호화이다.
  - Rainbow table attack 같은 취약점을 보안한 해쉬함수이다.

### PBKDF2란? ###
  - 사용자 패스워드에 해시함수, 솔트(Salt), 반복 횟수 등을 지정하여 패스워드에 대한 다이제스트(Digest)를 생성하는 방식

### scrypt란? ###
  - PBKDF2와 유사한 adaptive key derivation function이며 Colin Percival이 2012년 9월 17일 설계했다. scrypt는 다이제스트를 생성할 때 메모리 오버헤드를 갖도록 설계되어, 억지 기법 공격(brute-force attack)을 시도할 때 병렬화 처리가 매우 어렵다. 따라서 PBKDF2보다 안전하다고 평가되며 미래에 bcrypt에 비해 더 경쟁력이 있다고 여겨진다. scrypt는 보안에 아주 민감한 사용자들을 위한 백업 솔루션을 제공하는 Tarsnap에서도 사용하고 있다. 또한 scrypt는 여러 프로그래밍 언어의 라이브러리로 제공받을 수 있다.

### 마치며 ###

https://d2.naver.com/helloworld/318732 에 의하면

"매우 강력한 패스워드 다이제스트를 생성하는 시스템을 쉽게 구현하고 싶다면 **bcrypt**를 사용하는 것이 좋다. 대부분의 프로그래밍 언어에서 라이브러리를 사용할 수 있고, 검색 엔진에서 "bcrypt <프로그래밍 언어>"로 검색하면 쉽게 예제를 구할 수 있다."

https://d2.naver.com/helloworld/318732 에 의하면

"구현하려는 시스템이 매우 민감한 정보를 다루고, 보안 시스템을 구현하는 데 많은 비용을 투자할 수 있다면 **scrypt**를 사용하면 된다."
